# Task 59: Error Reporting & Source Tracking の実装

AST への位置情報の埋め込みと、それを利用した詳細なエラーレポート機能を実装してください。

## ステップ

### 1. 構文定義の拡張 (Syntax.hs)
- `src/Spinor/Syntax.hs` に `SourcePos` と `SourceSpan` 型を定義してください。
- `Expr` 型のすべてのコンストラクタに `SourceSpan` フィールドを追加してください。
- ※注意: `Eq` や `Show` のインスタンス、`exprToVal` などの変換関数もすべて修正が必要です。

### 2. パーサーの改修 (Syntax.hs)
- Megaparsec の機能を使い、パース時に `SourceSpan` をキャプチャするように各パーサー (`pInt`, `pSym`, `pList` 等) をラップしてください。
- 階層的な S式において、親ノード（リスト）が子ノード（要素）をすべて含む正しい範囲を保持するようにしてください。

### 3. 型推論器の対応 (Infer.hs)
- `Infer` モナドのエラー型を `Either Text` から `Either SpinorError` (または相当) に変更してください。
- `infer` 関数でのパターンマッチを修正し、`throwError` を呼び出す際に、現在処理中の AST ノードが持つ `SourceSpan` を渡すようにしてください。

### 4. 評価器の対応 (Eval.hs)
- `Eval` モナドのエラー型を拡張し、実行時エラーが発生した場所を表示できるようにしてください。
- 関数適用やプリミティブ実行時のエラーに、呼び出し側の位置情報を付与してください。

### 5. CLI 出力の改善 (Main.hs)
- エラーを受け取った際に、`SourceSpan` を解析して人間が読みやすい形式 (`file:line:col: message`) で出力するロジックを実装してください。

### 6. 動作確認
- 意図的にエラーを発生させるコードを実行し、エラー位置が正しく指摘されるか確認してください。

## 実装報告ルール
実装完了後、**このファイル自体を編集して**、以下のセクションを末尾に追記してください。

### 実装方針
(位置情報の引き回しで工夫した点や、エラー表示のフォーマット決定の理由について)

### 実装内容
(変更したファイルの一覧、新しく追加したエラー関連の型や関数など)
